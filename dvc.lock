schema: '2.0'
stages:
  property_data_cleaning:
    cmd: python -m src.data.data_cleaning
    deps:
    - path: data/raw/f_original magicbricks cleaned 12022 data.csv
      hash: md5
      md5: 7cbbb4d92e3abeff61adf4cc440fa06a
      size: 49763296
    - path: src/data/data_cleaning.py
      hash: md5
      md5: e875c4a2198f7042f35344960c3eaf8f
      size: 79892
    outs:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: 8841017466596042142b06cdc4920db4
      size: 5455200
  data_preparation:
    cmd: python -m src.data.data_preparation
    deps:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: 8841017466596042142b06cdc4920db4
      size: 5455200
    - path: src/data/data_preparation.py
      hash: md5
      md5: 34638cfc1c85f9085ac8956c848bc501
      size: 3134
    params:
      params.yaml:
        Data_Preparation.random_state: 71
        Data_Preparation.test_size: 0.2
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: 0871f51cd63be64ab446d5ded39c435e
      size: 1076543
    - path: data/interim/train.csv
      hash: md5
      md5: 6a680ebdfe3a8e8b0f6e5914aa3ed23a
      size: 4282746
  preprocessing_and_train:
    cmd: python -m src.models.preprocess_train
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: 0871f51cd63be64ab446d5ded39c435e
      size: 1076543
    - path: data/interim/train.csv
      hash: md5
      md5: 6a680ebdfe3a8e8b0f6e5914aa3ed23a
      size: 4282746
    - path: src/models/preprocess_train.py
      hash: md5
      md5: 9d904a93b4fc6c01f7b4e359bb0cd31c
      size: 24671
    params:
      params.yaml:
        Train.cv_folds: 2
        Train.early_stopping_rounds: 50
        Train.knn_neighbors: 5
        Train.n_trials: 3
        Train.random_state: 71
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/best_per_family_summary_auto.pkl
      hash: md5
      md5: 96a6c1193edcd8dfbd833dbf279ea135
      size: 279
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: 9f954cf782dce959226c3b5f7a0e571e
      size: 120
    - path: cache/artifacts_auto/optuna_study_auto.pkl
      hash: md5
      md5: 45c919c45260ccf64b7b3c704fd02383
      size: 8575
    - path: cache/predictions/oof_preds_log_baseline.pkl
      hash: md5
      md5: 9755568c479f0ead6a257379bf546bb0
      size: 75817
    - path: cache/predictions/test_preds_avg_log_baseline.pkl
      hash: md5
      md5: 8752359f5bb70fa4f081fc073a5a9d26
      size: 19129
  evaluation:
    cmd: python -m src.models.evaluation
    deps:
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: 9f954cf782dce959226c3b5f7a0e571e
      size: 120
    - path: data/interim/test.csv
      hash: md5
      md5: 0871f51cd63be64ab446d5ded39c435e
      size: 1076543
    - path: data/interim/train.csv
      hash: md5
      md5: 6a680ebdfe3a8e8b0f6e5914aa3ed23a
      size: 4282746
    - path: src/models/evaluation.py
      hash: md5
      md5: 2ec5ebe6577ec9c86f4e753b7f268b18
      size: 19275
    params:
      params.yaml:
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/cleaner_full_for_te.pkl
      hash: md5
      md5: d14c4b82148e5af48ea4d1ceb67a4c5c
      size: 3851
    - path: cache/artifacts_auto/final_model.joblib
      hash: md5
      md5: 6f4357892ca634b11cd6fc0b2dfd1a65
      size: 68966305
    - path: cache/artifacts_auto/preprocessor.joblib
      hash: md5
      md5: b16abdd06312d019892a04db7e4d28bb
      size: 3932821
    - path: cache/artifacts_auto/te_full.pkl
      hash: md5
      md5: 13bde6769dbc7c78c8c1f7443f6b4d8f
      size: 17253
    - path: cache/evaluation/eval_metrics.json
      hash: md5
      md5: 96a2ad3d1fa996aa4203b48b08f58406
      size: 484
    - path: cache/evaluation/predictions_test.csv
      hash: md5
      md5: 827ae6e7577e44b70efeb0e2e0040f6e
      size: 57621
    - path: cache/evaluation/predictions_train.csv
      hash: md5
      md5: dc3c9f319aa9f1a9cafe5e79c8245d10
      size: 230960
    - path: cache/run_information.json
      hash: md5
      md5: 4979b37c673eaf53436687ab450d0637
      size: 120
  register_model:
    cmd: python -m src.models.register_model
    deps:
    - path: cache/run_information.json
      hash: md5
      md5: 4979b37c673eaf53436687ab450d0637
      size: 120
    - path: src/models/register_model.py
      hash: md5
      md5: 74f49e972eb06fad511001eab59d525e
      size: 4242
    outs:
    - path: cache/model_registry/registered_model_info.json
      hash: md5
      md5: f89e8907e0476c2a0af181af30de48af
      size: 265
