schema: '2.0'
stages:
  property_data_cleaning:
    cmd: python src/data/data_cleaning.py
    deps:
    - path: data/raw/f_original magicbricks cleaned 12022 data.csv
      hash: md5
      md5: 7cbbb4d92e3abeff61adf4cc440fa06a
      size: 49763296
    - path: src/data/data_cleaning.py
      hash: md5
      md5: 24b90b46b0b49541b0da4789591f7246
      size: 79876
    outs:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: 8841017466596042142b06cdc4920db4
      size: 5455200
  data_preparation:
    cmd: python src/data/data_preparation.py
    deps:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: 8841017466596042142b06cdc4920db4
      size: 5455200
    - path: src/data/data_preparation.py
      hash: md5
      md5: 76cee536e2486eb077bacb5494020569
      size: 3115
    params:
      params.yaml:
        Data_Preparation.random_state: 42
        Data_Preparation.test_size: 0.2
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: 3b1ad425b61f728f57c32f2645e39798
      size: 1069397
    - path: data/interim/train.csv
      hash: md5
      md5: 9e3b46867117c215ab742fe0a4fa3ee0
      size: 4289892
  data_preprocessing:
    cmd: python src/features/data_preprocessing.py
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: 3b1ad425b61f728f57c32f2645e39798
      size: 1069397
    - path: data/interim/train.csv
      hash: md5
      md5: 9e3b46867117c215ab742fe0a4fa3ee0
      size: 4289892
    - path: src/features/data_preprocessing.py
      hash: md5
      md5: e9237359b4bd704c745c02cf7c8ea852
      size: 12134
    outs:
    - path: data/processed/test_trans.csv
      hash: md5
      md5: eaf2fc5958b489d8241ac22d0aef63c7
      size: 1642135
    - path: data/processed/train_trans.csv
      hash: md5
      md5: 6c6ce825af5afd694e965c7d20e55024
      size: 6553606
    - path: models/preprocessor.joblib
      hash: md5
      md5: 72cd0bb98efd17f0b9837a7d1b9541a2
      size: 3931759
  preprocessing_and_train:
    cmd: python src/models/preprocess_train.py
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: 3b1ad425b61f728f57c32f2645e39798
      size: 1069397
    - path: data/interim/train.csv
      hash: md5
      md5: 9e3b46867117c215ab742fe0a4fa3ee0
      size: 4289892
    - path: src/models/preprocess_train.py
      hash: md5
      md5: 5362d1a20ad710b1750cb4202543b177
      size: 29402
    params:
      params.yaml:
        Train.cv_folds: 5
        Train.early_stopping_rounds: 50
        Train.knn_neighbors: 5
        Train.n_trials: 30
        Train.random_state: 42
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/best_per_family_summary_auto.pkl
      hash: md5
      md5: 286250667ec09bb3c6c21eac3b858caf
      size: 532
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: e7397a02003570995fe3b67eb5e9e9c7
      size: 217
    - path: cache/artifacts_auto/optuna_study_auto.pkl
      hash: md5
      md5: 9888d612c80986c35705436a936dfb1f
      size: 27038
    - path: cache/predictions/oof_preds_log_baseline.pkl
      hash: md5
      md5: e74bc160b8c33c8970a823229526b94a
      size: 75817
    - path: cache/predictions/test_preds_avg_log_baseline.pkl
      hash: md5
      md5: 7dec9c85b1b9e2bd516273914ec1e740
      size: 19129
  evaluation:
    cmd: python src/models/evaluation.py
    deps:
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: e7397a02003570995fe3b67eb5e9e9c7
      size: 217
    - path: data/interim/test.csv
      hash: md5
      md5: 3b1ad425b61f728f57c32f2645e39798
      size: 1069397
    - path: data/interim/train.csv
      hash: md5
      md5: 9e3b46867117c215ab742fe0a4fa3ee0
      size: 4289892
    - path: src/models/evaluation.py
      hash: md5
      md5: 5d3db30d211c6a92fbd62dca2dc178e5
      size: 23295
    params:
      params.yaml:
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/cleaner_full_for_te.pkl
      hash: md5
      md5: 71d195129ea21dbec1288ce086913e81
      size: 3844
    - path: cache/artifacts_auto/final_pipeline_best.pkl
      hash: md5
      md5: 5083da6b33ffe4993dd0dff01fb09078
      size: 10245405
    - path: cache/artifacts_auto/te_full.pkl
      hash: md5
      md5: 4bcbee0835a541c0cba20539bf89c3b8
      size: 17333
    - path: cache/evaluation/eval_metrics.json
      hash: md5
      md5: 8eee87cd63115945134c9aa1dea486ee
      size: 503
    - path: cache/evaluation/predictions_test.csv
      hash: md5
      md5: 352848f84a15724cc817d51ba736db35
      size: 57835
    - path: cache/evaluation/predictions_train.csv
      hash: md5
      md5: 2df080253fa2e38ddba5c8d314bcd40b
      size: 230837
