schema: '2.0'
stages:
  property_data_cleaning:
    cmd: python -m src.data.data_cleaning
    deps:
    - path: data/raw/f_original magicbricks cleaned 12022 data.csv
      hash: md5
      md5: 7cbbb4d92e3abeff61adf4cc440fa06a
      size: 49763296
    - path: src/data/data_cleaning.py
      hash: md5
      md5: 8e9f8b0edfc06383fd997c0b078b6802
      size: 80275
    outs:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: f2310010975276bc99d92b0ad18eccf2
      size: 5758144
  data_preparation:
    cmd: python -m src.data.data_preparation
    deps:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: f2310010975276bc99d92b0ad18eccf2
      size: 5758144
    - path: src/data/data_preparation.py
      hash: md5
      md5: 34638cfc1c85f9085ac8956c848bc501
      size: 3134
    params:
      params.yaml:
        Data_Preparation.random_state: 42
        Data_Preparation.test_size: 0.2
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: 858fe8bfe1206fbfe775d8be09334534
      size: 1130274
    - path: data/interim/train.csv
      hash: md5
      md5: ff99481d7feece81a092e08a0be10df3
      size: 4531979
  preprocessing_and_train:
    cmd: python -m src.models.preprocess_train
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: 858fe8bfe1206fbfe775d8be09334534
      size: 1130274
    - path: data/interim/train.csv
      hash: md5
      md5: ff99481d7feece81a092e08a0be10df3
      size: 4531979
    - path: src/models/preprocess_train.py
      hash: md5
      md5: c199d912046183cd67baf0f06e0b7393
      size: 24831
    params:
      params.yaml:
        Train.cv_folds: 2
        Train.early_stopping_rounds: 50
        Train.knn_neighbors: 5
        Train.n_trials: 3
        Train.random_state: 42
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/best_per_family_summary_auto.pkl
      hash: md5
      md5: 185b2d2385ace4ad5885b185a83fdf47
      size: 494
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: 4275e02b1b41ca3b20b2d5f539ba24f6
      size: 179
    - path: cache/artifacts_auto/optuna_study_auto.pkl
      hash: md5
      md5: 8f613683a29fbd9a4452ddd4dec75202
      size: 9106
    - path: cache/predictions/oof_preds_log_baseline.pkl
      hash: md5
      md5: 51d99e9895ff254da570814df1e6335d
      size: 75817
    - path: cache/predictions/test_preds_avg_log_baseline.pkl
      hash: md5
      md5: 2972586116b09d0c740da0b684931059
      size: 19129
  evaluation:
    cmd: python -m src.models.evaluation
    deps:
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: 4275e02b1b41ca3b20b2d5f539ba24f6
      size: 179
    - path: data/interim/test.csv
      hash: md5
      md5: 858fe8bfe1206fbfe775d8be09334534
      size: 1130274
    - path: data/interim/train.csv
      hash: md5
      md5: ff99481d7feece81a092e08a0be10df3
      size: 4531979
    - path: src/models/evaluation.py
      hash: md5
      md5: 407292ac99230e02721d9396e107abde
      size: 19444
    params:
      params.yaml:
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/cleaner_full_for_te.pkl
      hash: md5
      md5: 239f3bf9df528cbadf30fd724799f9e8
      size: 5608
    - path: cache/artifacts_auto/final_model.joblib
      hash: md5
      md5: d9ebbb78c988baa15d20a129b3b62150
      size: 1527070
    - path: cache/artifacts_auto/preprocessor.joblib
      hash: md5
      md5: 7ffb37285aba933ec029f9c7c93a7ad6
      size: 3935168
    - path: cache/artifacts_auto/te_full.pkl
      hash: md5
      md5: b9d5028cad5b12004469ed29bf643af3
      size: 25184
    - path: cache/evaluation/eval_metrics.json
      hash: md5
      md5: 26c7b9de15472a782d8363a2e42644a4
      size: 485
    - path: cache/evaluation/predictions_test.csv
      hash: md5
      md5: 69c1b413e0c922f631017688bc426c66
      size: 37183
    - path: cache/evaluation/predictions_train.csv
      hash: md5
      md5: 75cd291a840a5e4edd8b79fb57512450
      size: 148222
    - path: cache/run_information.json
      hash: md5
      md5: c97866f55e1ac8d63ca966b9685d640c
      size: 121
  register_model:
    cmd: python -m src.models.register_model
    deps:
    - path: cache/run_information.json
      hash: md5
      md5: c97866f55e1ac8d63ca966b9685d640c
      size: 121
    - path: src/models/register_model.py
      hash: md5
      md5: 8cb9e520fb3f70a7f627ef7527c28f0c
      size: 5466
    outs:
    - path: cache/model_registry/registered_model_info.json
      hash: md5
      md5: 5b23a7f68f21ee11bce7ba1299145ac2
      size: 266
