schema: '2.0'
stages:
  property_data_cleaning:
    cmd: python -m src.data.data_cleaning
    deps:
    - path: data/raw/f_original magicbricks cleaned 12022 data.csv
      hash: md5
      md5: 7cbbb4d92e3abeff61adf4cc440fa06a
      size: 49763296
    - path: src/data/data_cleaning.py
      hash: md5
      md5: e875c4a2198f7042f35344960c3eaf8f
      size: 79892
    outs:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: 8841017466596042142b06cdc4920db4
      size: 5455200
  data_preparation:
    cmd: python -m src.data.data_preparation
    deps:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: 8841017466596042142b06cdc4920db4
      size: 5455200
    - path: src/data/data_preparation.py
      hash: md5
      md5: 34638cfc1c85f9085ac8956c848bc501
      size: 3134
    params:
      params.yaml:
        Data_Preparation.random_state: 23
        Data_Preparation.test_size: 0.2
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: 0934b07a3191ebb132eb4ec06ea8cf6c
      size: 1068668
    - path: data/interim/train.csv
      hash: md5
      md5: 58ca92f568c4f1b0e25e894a782717b2
      size: 4290621
  preprocessing_and_train:
    cmd: python -m src.models.preprocess_train
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: 0934b07a3191ebb132eb4ec06ea8cf6c
      size: 1068668
    - path: data/interim/train.csv
      hash: md5
      md5: 58ca92f568c4f1b0e25e894a782717b2
      size: 4290621
    - path: src/models/preprocess_train.py
      hash: md5
      md5: 9d904a93b4fc6c01f7b4e359bb0cd31c
      size: 24671
    params:
      params.yaml:
        Train.cv_folds: 2
        Train.early_stopping_rounds: 50
        Train.knn_neighbors: 5
        Train.n_trials: 3
        Train.random_state: 23
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/best_per_family_summary_auto.pkl
      hash: md5
      md5: 1cbd31fd3323295e22abcd9f866a52e7
      size: 340
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: 6b4cbbf4935732ccc6d7660df2ac9a02
      size: 217
    - path: cache/artifacts_auto/optuna_study_auto.pkl
      hash: md5
      md5: 38ef98d24b3ec5b33dccf8d0f92a5e5d
      size: 9330
    - path: cache/predictions/oof_preds_log_baseline.pkl
      hash: md5
      md5: eeef636276ad0c82b9d75a49e2c3d84d
      size: 75817
    - path: cache/predictions/test_preds_avg_log_baseline.pkl
      hash: md5
      md5: 7226c5144a8886829ee3268b7051fee7
      size: 19129
  evaluation:
    cmd: python -m src.models.evaluation
    deps:
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: 6b4cbbf4935732ccc6d7660df2ac9a02
      size: 217
    - path: data/interim/test.csv
      hash: md5
      md5: 0934b07a3191ebb132eb4ec06ea8cf6c
      size: 1068668
    - path: data/interim/train.csv
      hash: md5
      md5: 58ca92f568c4f1b0e25e894a782717b2
      size: 4290621
    - path: src/models/evaluation.py
      hash: md5
      md5: 2ec5ebe6577ec9c86f4e753b7f268b18
      size: 19275
    params:
      params.yaml:
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/cleaner_full_for_te.pkl
      hash: md5
      md5: d66224ca42b51d6e9cf4bb6289312af9
      size: 3822
    - path: cache/artifacts_auto/final_model.joblib
      hash: md5
      md5: b5d5a43df55d9020401d87845464c8db
      size: 2365881
    - path: cache/artifacts_auto/preprocessor.joblib
      hash: md5
      md5: 9676f9c471ff1830f444d30ee4512e85
      size: 3932821
    - path: cache/artifacts_auto/te_full.pkl
      hash: md5
      md5: c96aac7e4e7b41c65f714a900c0fcbfa
      size: 17181
    - path: cache/evaluation/eval_metrics.json
      hash: md5
      md5: cbe12dc991e1f3f13b463b6ef9f2191e
      size: 485
    - path: cache/evaluation/predictions_test.csv
      hash: md5
      md5: 1d9d1d35275afbd2119bafa0ddcf991f
      size: 57845
    - path: cache/evaluation/predictions_train.csv
      hash: md5
      md5: 120ad5a2ad4705e8bef38f8cf9bc0282
      size: 230800
    - path: cache/run_information.json
      hash: md5
      md5: c251eae65b1d077b628d09252059ea88
      size: 122
  register_model:
    cmd: python -m src.models.register_model
    deps:
    - path: cache/run_information.json
      hash: md5
      md5: c251eae65b1d077b628d09252059ea88
      size: 122
    - path: src/models/register_model.py
      hash: md5
      md5: 303d5c1fa023901e9da3913409a79373
      size: 4198
    outs:
    - path: cache/model_registry/registered_model_info.json
      hash: md5
      md5: e95f7dedfd37f8daef57a660751762e9
      size: 267
