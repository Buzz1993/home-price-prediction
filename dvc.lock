schema: '2.0'
stages:
  property_data_cleaning:
    cmd: python -m src.data.data_cleaning
    deps:
    - path: data/raw/f_original magicbricks cleaned 12022 data.csv
      hash: md5
      md5: 7cbbb4d92e3abeff61adf4cc440fa06a
      size: 49763296
    - path: src/data/data_cleaning.py
      hash: md5
      md5: e875c4a2198f7042f35344960c3eaf8f
      size: 79892
    outs:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: 8841017466596042142b06cdc4920db4
      size: 5455200
  data_preparation:
    cmd: python -m src.data.data_preparation
    deps:
    - path: data/cleaned/property_cleaned.csv
      hash: md5
      md5: 8841017466596042142b06cdc4920db4
      size: 5455200
    - path: src/data/data_preparation.py
      hash: md5
      md5: 34638cfc1c85f9085ac8956c848bc501
      size: 3134
    params:
      params.yaml:
        Data_Preparation.random_state: 74
        Data_Preparation.test_size: 0.2
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: f495d666472c58dabb954d3705b9a7a9
      size: 1072286
    - path: data/interim/train.csv
      hash: md5
      md5: 4940adaaa5ba9da623e6a7e9340c7e97
      size: 4287003
  preprocessing_and_train:
    cmd: python -m src.models.preprocess_train
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: f495d666472c58dabb954d3705b9a7a9
      size: 1072286
    - path: data/interim/train.csv
      hash: md5
      md5: 4940adaaa5ba9da623e6a7e9340c7e97
      size: 4287003
    - path: src/models/preprocess_train.py
      hash: md5
      md5: 9d904a93b4fc6c01f7b4e359bb0cd31c
      size: 24671
    params:
      params.yaml:
        Train.cv_folds: 2
        Train.early_stopping_rounds: 50
        Train.knn_neighbors: 5
        Train.n_trials: 3
        Train.random_state: 74
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/best_per_family_summary_auto.pkl
      hash: md5
      md5: 58046ca029259cd33777265ddaeae444
      size: 385
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: 7268ec75345209508e6fd9a8b781fc12
      size: 179
    - path: cache/artifacts_auto/optuna_study_auto.pkl
      hash: md5
      md5: 608c7ca316b3c70e25cec5d9f6e8920b
      size: 8834
    - path: cache/predictions/oof_preds_log_baseline.pkl
      hash: md5
      md5: 2688f9a1c93e6a9e00c2ae7869eadbf0
      size: 75817
    - path: cache/predictions/test_preds_avg_log_baseline.pkl
      hash: md5
      md5: 6ec8619c051e20b9dba1f3f83cfefcbf
      size: 19129
  evaluation:
    cmd: python -m src.models.evaluation
    deps:
    - path: cache/artifacts_auto/best_trial_params_auto.pkl
      hash: md5
      md5: 7268ec75345209508e6fd9a8b781fc12
      size: 179
    - path: data/interim/test.csv
      hash: md5
      md5: f495d666472c58dabb954d3705b9a7a9
      size: 1072286
    - path: data/interim/train.csv
      hash: md5
      md5: 4940adaaa5ba9da623e6a7e9340c7e97
      size: 4287003
    - path: src/models/evaluation.py
      hash: md5
      md5: 2ec5ebe6577ec9c86f4e753b7f268b18
      size: 19275
    params:
      params.yaml:
        Train.target_col: price
    outs:
    - path: cache/artifacts_auto/cleaner_full_for_te.pkl
      hash: md5
      md5: dae6fa8cc0cb092c15689bd9e990aa1b
      size: 3854
    - path: cache/artifacts_auto/final_model.joblib
      hash: md5
      md5: c897ae425658fe64d51d6b51bd9a4d7c
      size: 2437707
    - path: cache/artifacts_auto/preprocessor.joblib
      hash: md5
      md5: 6acdd7b9832458f5e1a774b3b53f150d
      size: 3932821
    - path: cache/artifacts_auto/te_full.pkl
      hash: md5
      md5: b4f7a702e1d28ab8fb325ce5367357b7
      size: 17277
    - path: cache/evaluation/eval_metrics.json
      hash: md5
      md5: cb84b8ddbfbc58e635a553a71ac82a7b
      size: 483
    - path: cache/evaluation/predictions_test.csv
      hash: md5
      md5: 8c3244dc1b1d06100faac58216d6e12b
      size: 37122
    - path: cache/evaluation/predictions_train.csv
      hash: md5
      md5: 8ffa476d039cfd41376634524832c6c6
      size: 148250
    - path: cache/run_information.json
      hash: md5
      md5: 5a73a11aab6e215c5886a940ec444fe4
      size: 121
  register_model:
    cmd: python -m src.models.register_model
    deps:
    - path: cache/run_information.json
      hash: md5
      md5: 5a73a11aab6e215c5886a940ec444fe4
      size: 121
    - path: src/models/register_model.py
      hash: md5
      md5: 74f49e972eb06fad511001eab59d525e
      size: 4242
    outs:
    - path: cache/model_registry/registered_model_info.json
      hash: md5
      md5: 2f460a69b43e9edc0592a6ba87285f37
      size: 266
